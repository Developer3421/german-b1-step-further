<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="German_B1._Step_Further.Views.InstrumentsWindow"
        Title="Інструменти AI"
        WindowStartupLocation="CenterOwner"
        SystemDecorations="BorderOnly"
        Background="#FFF5E6D3"
        BorderThickness="0.5"
        BorderBrush="#22000000"
        Width="900"
        Height="700"
        CanResize="True"
        MinWidth="520"
        MinHeight="360"
        Padding="8"
        ExtendClientAreaToDecorationsHint="True"
        ExtendClientAreaChromeHints="NoChrome"
        ExtendClientAreaTitleBarHeightHint="40"
        UseLayoutRounding="True"
        FontFamily="Segoe UI, Arial, Tahoma">

    <Window.Resources>
        <!-- Gray Gradient for Title Bar -->
        <LinearGradientBrush x:Key="GrayGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#FFE0E0E0" Offset="0"/>
            <GradientStop Color="#FFD0D0D0" Offset="0.3"/>
            <GradientStop Color="#FFC5C5C5" Offset="0.7"/>
            <GradientStop Color="#FFC0C0C0" Offset="1"/>
        </LinearGradientBrush>
        
        <!-- Icon Bitmaps -->
        <Bitmap x:Key="CloseButtonImage">../Icons/CloseButton.png</Bitmap>
    </Window.Resources>

    <Window.Styles>
        <!-- Window Control Button (Close) -->
        <Style Selector="Button.window-control">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#303030"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="28"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style Selector="Button.window-control:pointerover">
            <Setter Property="Background" Value="#40FFFFFF"/>
        </Style>
        <Style Selector="Button.window-control.close">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#FF000000"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
        <Style Selector="Button.window-control.close:pointerover">
            <Setter Property="Background" Value="#40FF5C5C"/>
            <Setter Property="Foreground" Value="#FF000000"/>
        </Style>
        
        <!-- AI Tool Button Style -->
        <Style Selector="Button.ai-tool-button">
            <Setter Property="Background" Value="#FFFAF0E6"/>
            <Setter Property="Foreground" Value="#8A2BE2"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#FFE8D5B7"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="15,12"/>
            <Setter Property="Margin" Value="0,6"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
        </Style>
        <Style Selector="Button.ai-tool-button:pointerover">
            <Setter Property="Background" Value="#FFF0E6DC"/>
            <Setter Property="BorderBrush" Value="#9370DB"/>
        </Style>
        <Style Selector="Button.ai-tool-button:pressed">
            <Setter Property="Background" Value="#FFE8D5C7"/>
        </Style>

        <!-- Secondary toolbar button (Back to list) -->
        <Style Selector="Button.secondary-toolbar-button">
            <Setter Property="Height" Value="32"/>
            <Setter Property="Background" Value="#50000000"/>
            <Setter Property="Foreground" Value="#FF404040"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="12,0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style Selector="Button.secondary-toolbar-button:pointerover">
            <Setter Property="Background" Value="#70000000"/>
        </Style>
    </Window.Styles>

    <!-- MAIN LAYOUT -->
    <Grid RowDefinitions="42,*">

        <!-- ROW 0: TITLE BAR -->
        <Grid Name="TitleBarRow" Grid.Row="0" Background="{StaticResource GrayGradient}">
            <Grid ColumnDefinitions="Auto,*,Auto">
                
                <!-- Column 0: App Icon and Title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="8,0,0,0">
                    <!-- Tools Icon -->
                    <Border Width="28" Height="28" CornerRadius="4" Background="#50000000" Margin="0,0,10,0">
                        <Viewbox Width="18" Height="18">
                            <Canvas Width="24" Height="24">
                                <Path Fill="#FF505050" Data="M22.7,19l-9.1-9.1c0.9-2.3,0.4-5-1.5-6.9c-2-2-5-2.4-7.4-1.3L9,6L6,9L1.6,4.7C0.4,7.1,0.9,10.1,2.9,12.1c1.9,1.9,4.6,2.4,6.9,1.5l9.1,9.1c0.4,0.4,1,0.4,1.4,0l2.3-2.3C23.1,20,23.1,19.3,22.7,19z"/>
                            </Canvas>
                        </Viewbox>
                    </Border>
                    
                    <TextBlock Text="Інструменти AI" 
                               FontSize="14" 
                               FontWeight="SemiBold" 
                               Foreground="#FF404040" 
                               VerticalAlignment="Center"/>
                </StackPanel>
                
                <!-- Column 1: Spacer (draggable area) -->
                <Border Grid.Column="1" Background="Transparent"/>
                
                <!-- Column 2: Window Controls -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <!-- Close Button -->
                    <Button Name="CloseButton" Classes="window-control close" Padding="0" BorderThickness="0">
                        <Image Source="{StaticResource CloseButtonImage}" Stretch="UniformToFill"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Grid>

        <!-- ROW 1: CONTENT AREA -->
        <Grid Grid.Row="1" Name="RootContentGrid" RowDefinitions="Auto,*" Background="#FFF5E6D3">

            <!-- Top content bar (shown only in WebView mode) -->
            <Border Name="WebTopBar" Background="#FFFFE0B2" CornerRadius="8" Padding="8" Margin="0,0,0,8" IsVisible="False">
                <DockPanel LastChildFill="True">
                    <Button Name="BackToToolsButton" Classes="secondary-toolbar-button" DockPanel.Dock="Left">Назад до інструментів</Button>
                    <TextBlock Name="CurrentServiceText" Text="" FontSize="13" FontWeight="SemiBold" Foreground="#FF404040" VerticalAlignment="Center" Margin="12,0,0,0"/>
                </DockPanel>
            </Border>

            <!-- Tools list (default) -->
            <ScrollViewer Name="ToolsListScroll" Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                <StackPanel Margin="20,15,20,20">

                    <!-- Header -->
                    <TextBlock Text="Оберіть AI асистент"
                               FontSize="18" FontWeight="Bold" Foreground="#8A2BE2" Margin="0,5,0,15"/>

                    <!-- Google Gemini -->
                    <Button Name="GeminiButton" Classes="ai-tool-button" Tag="https://gemini.google.com">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <Image Name="GeminiIcon" Width="24" Height="24" Margin="0,0,12,0"/>
                            <TextBlock Text="Google Gemini" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    
                    <!-- Microsoft Copilot -->
                    <Button Name="CopilotButton" Classes="ai-tool-button" Tag="https://copilot.microsoft.com">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <Image Name="CopilotIcon" Width="24" Height="24" Margin="0,0,12,0"/>
                            <TextBlock Text="Microsoft Copilot" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    
                    <!-- ChatGPT -->
                    <Button Name="ChatGPTButton" Classes="ai-tool-button" Tag="https://chat.openai.com">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <Image Name="ChatGPTIcon" Width="24" Height="24" Margin="0,0,12,0"/>
                            <TextBlock Text="ChatGPT" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    
                    <!-- Perplexity -->
                    <Button Name="PerplexityButton" Classes="ai-tool-button" Tag="https://www.perplexity.ai">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <Image Name="PerplexityIcon" Width="24" Height="24" Margin="0,0,12,0"/>
                            <TextBlock Text="Perplexity" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                    
                    <!-- Separator -->
                    <Border Height="1" Background="#FFD0C0A0" Margin="0,15,0,15"/>
                    
                    <!-- Local AI Chat Header -->
                    <TextBlock Text="Локальний AI (без інтернету)"
                               FontSize="16" FontWeight="Bold" Foreground="#FF8A2BE2" Margin="0,0,0,10"/>
                    
                    <!-- German Chat Bot (Local LLM) -->
                    <Button Name="GermanChatButton" Classes="ai-tool-button">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <!-- Abstract chat icon -->
                            <Border Width="24" Height="24" Background="#FF8A2BE2" CornerRadius="4" Margin="0,0,12,0">
                                <Viewbox Width="16" Height="16">
                                    <Canvas Width="24" Height="24">
                                        <Path Fill="White" Data="M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M6,9H18V11H6M14,14H6V12H14M18,8H6V6H18"/>
                                    </Canvas>
                                </Viewbox>
                            </Border>
                            <TextBlock Text="Співрозмовник німецькою (Gemma 3)" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <!-- User Agreement -->
                    <Button Name="UserAgreementButton" Classes="ai-tool-button">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <!-- Document icon -->
                            <Border Width="24" Height="24" Background="#FF6A5ACD" CornerRadius="4" Margin="0,0,12,0">
                                <Viewbox Width="16" Height="16">
                                    <Canvas Width="24" Height="24">
                                        <Path Fill="White" Data="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13,9V3.5L18.5,9H13M7,12H17V14H7V12M7,16H17V18H7V16"/>
                                    </Canvas>
                                </Viewbox>
                            </Border>
                            <TextBlock Text="User Agreement" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <!-- AI Content Complaint Button -->
                    <Button Name="ComplaintButton" Classes="ai-tool-button">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <!-- Warning icon -->
                            <Border Width="24" Height="24" Background="#FFFFA07A" CornerRadius="4" Margin="0,0,12,0">
                                <Viewbox Width="16" Height="16">
                                    <Canvas Width="24" Height="24">
                                        <Path Fill="#FF800000" Data="M12,2L1,21H23M12,6L19.53,19H4.47M11,10V14H13V10M11,16V18H13V16"/>
                                    </Canvas>
                                </Viewbox>
                            </Border>
                            <TextBlock Text="Скарга на контент створений Ai" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                </StackPanel>
            </ScrollViewer>

            <!-- WebView host (hidden until user clicks a service) -->
            <Border Name="WebHost" Grid.Row="1" Background="#FFF5E6D3" IsVisible="False">
                <Grid Name="WebViewContainer"/>
            </Border>

        </Grid>
    </Grid>
</Window>

