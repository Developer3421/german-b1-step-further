<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="German_B1._Step_Further.MainWindow"
        Title="German B1 - Step Further"
        WindowStartupLocation="CenterScreen"
        SystemDecorations="BorderOnly"
        Background="#FF8B4513"
        BorderThickness="0.5"
        BorderBrush="#22000000"
        Width="1200"
        Height="800"
        CanResize="True"
        MinWidth="480"
        MinHeight="320"
        Padding="8"
        ExtendClientAreaToDecorationsHint="True"
        ExtendClientAreaChromeHints="NoChrome"
        ExtendClientAreaTitleBarHeightHint="40"
        UseLayoutRounding="True"
        FontFamily="Segoe UI, Arial, Tahoma">

    <Window.Resources>
        <!-- Gray Gradient for Title Bar -->
        <LinearGradientBrush x:Key="GrayGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#FFE0E0E0" Offset="0"/>
            <GradientStop Color="#FFD0D0D0" Offset="0.3"/>
            <GradientStop Color="#FFC5C5C5" Offset="0.7"/>
            <GradientStop Color="#FFC0C0C0" Offset="1"/>
        </LinearGradientBrush>
        
        <!-- Splitter Brush -->
        <SolidColorBrush x:Key="SplitterBrush" Color="#FFD0D0D0"/>
        
        <!-- Icon Bitmaps -->
        <Bitmap x:Key="MinButtonImage">Icons/MinButton.png</Bitmap>
        <Bitmap x:Key="MaxButtonImage">Icons/MaxButton.png</Bitmap>
        <Bitmap x:Key="CloseButtonImage">Icons/CloseButton.png</Bitmap>
        <Bitmap x:Key="AddTabImage">Icons/AddTab.png</Bitmap>
        <Bitmap x:Key="InstrumentsButtonImage">Icons/InstrumensButton.png</Bitmap>
        <Bitmap x:Key="BackButtonImage">Icons/Backbutton.png</Bitmap>
        <Bitmap x:Key="ForwardButtonImage">Icons/ForwardButton.png</Bitmap>
        
        <!-- Tab gradients (from BrowserTemplate) -->
        <LinearGradientBrush x:Key="ActiveTabGradient" StartPoint="0%,0%" EndPoint="0%,100%">
            <GradientStop Color="#DDD6FE" Offset="0" />
            <GradientStop Color="#C4B5FD" Offset="1" />
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="InactiveTabGradient" StartPoint="0%,0%" EndPoint="0%,100%">
            <GradientStop Color="#F3F4F6" Offset="0" />
            <GradientStop Color="#E5E7EB" Offset="1" />
        </LinearGradientBrush>
    </Window.Resources>

    <Window.Styles>
        <!-- Window Control Buttons (Min, Max, Close) -->
        <Style Selector="Button.window-control">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#303030"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="28"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style Selector="Button.window-control:pointerover">
            <Setter Property="Background" Value="#40FFFFFF"/>
        </Style>
        <Style Selector="Button.window-control.close">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#FF000000"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
        <Style Selector="Button.window-control.close:pointerover">
            <Setter Property="Background" Value="#40FF5C5C"/>
            <Setter Property="Foreground" Value="#FF000000"/>
        </Style>
        
        <!-- Navigation Button Style -->
        <Style Selector="Button.nav-button">
            <Setter Property="Width" Value="32"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Background" Value="#FFFF6D00"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="CornerRadius" Value="6"/>
        </Style>
        <Style Selector="Button.nav-button:pointerover">
            <Setter Property="Background" Value="#FFFF8C00"/>
        </Style>
        <Style Selector="Button.nav-button:pressed">
            <Setter Property="Background" Value="#FFFF5500"/>
        </Style>
        
        <!-- Part Selection Button Style -->
        <Style Selector="Button.part-button">
            <Setter Property="Width" Value="32"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Background" Value="#50000000"/>
            <Setter Property="Foreground" Value="#FF404040"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        <Style Selector="Button.part-button:pointerover">
            <Setter Property="Background" Value="#70000000"/>
        </Style>
        <Style Selector="Button.part-button:pressed">
            <Setter Property="Background" Value="#90000000"/>
        </Style>
        
        <!-- Toolbar Button Style -->
        <Style Selector="Button.toolbar-button">
            <Setter Property="Width" Value="32"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style Selector="Button.toolbar-button:pointerover">
            <Setter Property="Background" Value="#40000000"/>
        </Style>
        
        <!-- GridSplitter Style -->
        <Style Selector="GridSplitter">
            <Setter Property="Background" Value="{StaticResource SplitterBrush}"/>
        </Style>
        <Style Selector="GridSplitter:pointerover">
            <Setter Property="Background" Value="#FFA0A0A0"/>
        </Style>
        
        <!-- Tab Styles (from BrowserTemplate) -->
        <Style Selector="Border.tab">
            <Setter Property="CornerRadius" Value="8,8,0,0"/>
            <Setter Property="Padding" Value="12,0,8,0"/>
            <Setter Property="Height" Value="38"/>
            <Setter Property="MinWidth" Value="100"/>
            <Setter Property="MaxWidth" Value="240"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Background" Value="{StaticResource InactiveTabGradient}"/>
            <Setter Property="Opacity" Value="0.7"/>
        </Style>
        <Style Selector="Border.tab.active">
            <Setter Property="Background" Value="{StaticResource ActiveTabGradient}"/>
            <Setter Property="BorderThickness" Value="1,1,1,0"/>
            <Setter Property="BorderBrush" Value="#A78BFA"/>
            <Setter Property="Opacity" Value="1"/>
        </Style>
        <Style Selector="Border.tab:pointerover">
            <Setter Property="Opacity" Value="1"/>
        </Style>
        <Style Selector="Border.tab TextBlock.tab-title">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="Foreground" Value="#D84315"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
        </Style>
        <Style Selector="Border.tab.active TextBlock.tab-title">
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>

        <Style Selector="Button.tab-close">
            <Setter Property="Width" Value="24"/>
            <Setter Property="Height" Value="24"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="CornerRadius" Value="5"/>
        </Style>
        <Style Selector="Button.tab-close:pointerover">
            <Setter Property="Background" Value="#DDD6FE"/>
        </Style>
        <Style Selector="Button.tab-close:pressed">
            <Setter Property="Background" Value="#C4B5FD"/>
        </Style>
    </Window.Styles>

    <!-- MAIN LAYOUT -->
    <Grid RowDefinitions="42,*">
        
        <!-- ROW 0: TITLE BAR (Gray with custom window controls) -->
        <Grid Name="TitleBarRow" Grid.Row="0" Background="{StaticResource GrayGradient}">
            <Grid ColumnDefinitions="Auto,Auto,Auto,Auto,Auto,*,Auto,Auto">
                
                <!-- Column 0: App Icon and Title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="8,0,0,0">
                    <!-- Book Icon -->
                    <Border Width="28" Height="28" CornerRadius="4" Background="#50000000" Margin="0,0,10,0">
                        <Viewbox Width="18" Height="18">
                            <Canvas Width="24" Height="24">
                                <Path Fill="#FF505050" Data="M21,5c-1.11-0.35-2.33-0.5-3.5-0.5c-1.95,0-4.05,0.4-5.5,1.5c-1.45-1.1-3.55-1.5-5.5-1.5S2.45,4.9,1,6v14.65c0,0.25,0.25,0.5,0.5,0.5c0.1,0,0.15-0.05,0.25-0.05C3.1,20.45,5.05,20,6.5,20c1.95,0,4.05,0.4,5.5,1.5c1.35-0.85,3.8-1.5,5.5-1.5c1.65,0,3.35,0.3,4.75,1.05c0.1,0.05,0.15,0.05,0.25,0.05c0.25,0,0.5-0.25,0.5-0.5V6C22.4,5.55,21.75,5.25,21,5z M21,18.5c-1.1-0.35-2.3-0.5-3.5-0.5c-1.7,0-4.15,0.65-5.5,1.5V8c1.35-0.85,3.8-1.5,5.5-1.5c1.2,0,2.4,0.15,3.5,0.5V18.5z"/>
                            </Canvas>
                        </Viewbox>
                    </Border>
                    
                    <TextBlock Text="German B1 - Step Further" 
                               FontSize="14" 
                               FontWeight="SemiBold" 
                               Foreground="#FF404040" 
                               VerticalAlignment="Center"/>
                </StackPanel>
                
                <!-- Column 1: Navigation Buttons (Back/Forward) with Orange Background -->
                <Border Grid.Column="1" Background="#FFFF8C00" CornerRadius="6" Padding="4" Margin="12,0,0,0" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal" Spacing="2">
                        <!-- Back Button -->
                        <Button Name="BackButton" Classes="nav-button">
                            <Image Source="{StaticResource BackButtonImage}" Stretch="UniformToFill"/>
                        </Button>
                        <!-- Forward Button -->
                        <Button Name="ForwardButton" Classes="nav-button">
                            <Image Source="{StaticResource ForwardButtonImage}" Stretch="UniformToFill"/>
                        </Button>
                    </StackPanel>
                </Border>
                
                <!-- Column 2: New Window Button -->
                <Button Name="NewWindowButton" Grid.Column="2" Width="32" Height="32" Margin="8,0,0,0" 
                        Background="Transparent" Padding="0" BorderThickness="0" 
                        Cursor="Hand" VerticalAlignment="Center"
                        ToolTip.Tip="Створити нове вікно">
                    <Viewbox Width="20" Height="20">
                        <Canvas Width="24" Height="24">
                            <Path Fill="#FF404040" Data="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,19H5V5H19V19M13,17V15H16L12,11L8,15H11V17H13Z"/>
                        </Canvas>
                    </Viewbox>
                </Button>
                
                <!-- Column 3: Add Tab Button -->
                <Button Name="PART_AddTabButton" Grid.Column="3" Width="32" Height="32" Margin="4,0,0,0" 
                        Background="Transparent" Padding="0" BorderThickness="0" 
                        Cursor="Hand" VerticalAlignment="Center"
                        ToolTip.Tip="Додати вкладку (введіть номер сторінки)">
                    <Image Source="{StaticResource AddTabImage}" Stretch="UniformToFill"/>
                </Button>

                <!-- Column 4: Tabs Container -->
                <StackPanel Name="TabsContainer" Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Top" Margin="6,4,0,0">
                    <!-- First Tab (always visible, not closable) -->
                    <Border Name="Tab_0" Classes="tab active" Tag="0" 
                            PointerPressed="Tab_PointerPressed"
                            PointerMoved="Tab_PointerMoved"
                            PointerReleased="Tab_PointerReleased">
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <Border Grid.Column="0" Width="18" Height="18" Margin="0,0,8,0" CornerRadius="3" Background="#A78BFA" VerticalAlignment="Center">
                                <Viewbox Width="12" Height="12">
                                    <Canvas Width="24" Height="24">
                                        <Path Fill="White" Data="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                    </Canvas>
                                </Viewbox>
                            </Border>
                            <TextBlock Grid.Column="1" Classes="tab-title" Text="Ч1 СТ1-2"/>
                            <Border Grid.Column="2" Width="12"/>
                        </Grid>
                    </Border>
                </StackPanel>

                <!-- Column 5: Spacer (draggable area) -->
                <Border Grid.Column="5" Background="Transparent"/>

                <!-- Column 6: Part Selection Buttons (1-4) and Instruments -->
                <StackPanel Grid.Column="6" Orientation="Horizontal" VerticalAlignment="Center" Spacing="4" Margin="0,0,12,0">
                    <!-- Part 1 Button -->
                    <Button Name="Part1Button" Classes="part-button">
                        <TextBlock Text="1" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Button>
                    <!-- Part 2 Button -->
                    <Button Name="Part2Button" Classes="part-button">
                        <TextBlock Text="2" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Button>
                    <!-- Part 3 Button -->
                    <Button Name="Part3Button" Classes="part-button">
                        <TextBlock Text="3" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Button>
                    <!-- Part 4 Button -->
                    <Button Name="Part4Button" Classes="part-button">
                        <TextBlock Text="4" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Button>
                    
                    <!-- Separator -->
                    <Border Width="1" Height="24" Background="#80000000" Margin="4,0"/>
                    
                    <!-- Instruments Button -->
                    <Button Name="InstrumentsButton" Classes="toolbar-button">
                        <Image Source="{StaticResource InstrumentsButtonImage}" Width="24" Height="24" Stretch="Uniform"/>
                    </Button>
                </StackPanel>
                
                <!-- Column 7: Window Controls -->
                <StackPanel Grid.Column="7" Orientation="Horizontal" VerticalAlignment="Center">
                    <!-- Minimize Button -->
                    <Button Name="MinimizeButton" Classes="window-control" Padding="0">
                        <Image Source="{StaticResource MinButtonImage}" Stretch="Uniform"/>
                    </Button>
                    <!-- Maximize Button -->
                    <Button Name="MaximizeButton" Classes="window-control" Padding="0">
                        <Image Source="{StaticResource MaxButtonImage}" Stretch="Uniform"/>
                    </Button>
                    <!-- Close Button -->
                    <Button Name="CloseButton" Classes="window-control close" Padding="0" BorderThickness="0">
                        <Image Source="{StaticResource CloseButtonImage}" Stretch="UniformToFill"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Grid>

        <!-- ROW 1: CONTENT AREA (Two equal panels with soft orange background) -->
        <Grid Grid.Row="1" ColumnDefinitions="*,5,*" Background="#FFF5E6D3">
            
            <!-- Left Panel -->
            <Border Grid.Column="0" Background="#FFF5E6D3">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                    <StackPanel Name="LeftContentPanel" Margin="0">
                        <!-- ContentsPage1 will be loaded here -->
                    </StackPanel>
                </ScrollViewer>
            </Border>
            
            <!-- Splitter -->
            <GridSplitter Grid.Column="1" ResizeDirection="Columns" HorizontalAlignment="Stretch"/>
            
            <!-- Right Panel -->
            <Border Grid.Column="2" Background="#FFF5E6D3">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                    <StackPanel Name="RightContentPanel" Margin="0">
                        <!-- ContentsPage2 will be loaded here -->
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
    </Grid>
</Window>
